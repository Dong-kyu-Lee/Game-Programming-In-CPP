버텍스를 어떻게 그려야 할지?
삼각형을 단색으로 채울지 혹은 텍스쳐에서 얻은 색상을 사용할지?
모든 픽셀에 광원 계산을 할지?

그래픽 하드웨어에서 위와 같은 작업들을 수행할 때 실행되는 작은 프로그램으로 **셰이더 프로그램(Shader program)** 이라고 한다.
- 셰이더 프로그램은 C++을 사용하지 않고, 이 책에서는 GLSL 언어를 사용한다.

셰이더는 별도의 프로그램으로, 별도의 파일이 존재한다. 그리고 C++ 코드에서 셰이더를 로드해서 이를 컴파일하고, OpenGL에 이 셰이더 프로그램을 사용하도록 요청한다.

## 버텍스 셰이더

버텍스 셰이더는 그려질 모든 삼각형의 버텍스에 대해 한 번 씩 실행되는 셰이더이다.
- 따라서 버텍스 버퍼와 인덱스 버퍼를 같이 사용해서 버텍스 정보를 줄이는 것이 효율적이다.
- `.vert` 확장자를 가진다.
- 버텍스 셰이더는 입력으로써 버텍스 속성을 받고 이를 수정한다.

```c
// GLSL 3.3 요청
#version 330

// 모든 버텍스 속성은 여기에 선언
// 현재는 3D 위치 하나 밖에 없음
in vec3 inPosition; // 버텍스 속성을 입력받을 변수 

void main()
{
	// 셰이더 코드 작성
	// inPosition을 gl_Position으로 직접 전달
	// gl_Position은 위치값이 4개임 (x,y,z,w)
	gl_Position = vec4(inPosition, 1.0);
}
```


## 프래그먼트 셰이더

**프래그먼트 셰이더(pragment shader; 픽셀 셰이더)** 는 삼각형의 픽셀들을 어떻게 색칠할지를 결정한다.
- 삼각형을 픽셀로 변환하는 과정을 레스터 변환(rasterization)이라고 한다.
- 모든 픽셀마다 한번씩 수행되며, 텍스처나 색상, 재질 같은 포면 속성과 광원 계산을 포함하여 픽셀의 색을 계산한다.
- `.frag` 확장자를 가진다.

```c
// GLSL 3.3 요청
#version 330

// 색상 버퍼로 출력되는 컬러
// out : 현재 셰이더 스테이지에서 렌더 파이프라인으로 출력할 변수 선언
out vec4 outColor;

void main()
{
	// 푸른색으로 설정(RGBA)
	outColor = vec4(0.0, 0.0, 1.0, 1.0); 
}
```


## 셰이더 로딩

위의 셰이더 파일을 C++ 코드로 불러와 OpenGL이 셰이더를 인식하도록 해보자.
셰이더 프로그램을 가져와 다음의 단계를 수행해야 한다. 이를 위해 셰이더 처리를 위해 클래스`Shader`을 선언하자.
1. 버텍스 셰이더를 로드하고 컴파일한다.
2. 프래그먼트 셰이더를 로드하고 컴파일한다.
3. 2개의 셰이더를 '셰이더 프로그램'에 서로 연결시킨다.

- `Game.cpp`의 `LoadShaders()` 와 `Shader.h, Shader.cpp` 코드 참조
